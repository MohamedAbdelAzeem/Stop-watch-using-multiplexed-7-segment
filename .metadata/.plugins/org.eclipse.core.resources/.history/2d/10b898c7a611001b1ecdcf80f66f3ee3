/*
 * main.c
 *
 *  Created on: Oct 19, 2020
 *      Author: Mohamed AbdelAzeem
 */

#define SECOND 1000


#include <util/delay.h>
#include <avr/io.h>
#include <avr/interrupt.h>
#include "operations.h"



unsigned char sec_1 = 0;
unsigned char sec_2 = 0;
unsigned char min_1 = 0 ;
unsigned char min_2 = 0;
unsigned char hr_1 = 0;
unsigned char hr_2  = 0 ;

unsigned char arr[6] = {0};
void Timer1_init(void)
{
	//timer interrupts
	SREG = (1<<7); //I_bit
	TIMSK = (1<< OCIE1A); //timer module interrupt Enable

	//F_cpu = 1Mhz
	TCCR1A = (1 << FOC1A) ;
	TCCR1B = (1<<CS10)|(1<<WGM12) ; //CLK/1
	TCNT1 = 0x00; //initial value 0
	//T_timer = 1 u_sec
	OCR1A = SECOND; //compare match every one second
}

//void print_num()
//{
//
//	int k = 0 ;
//	int i = PA0;
//	for(; i<=PA5 ;i++)
//	{
//		PORTA = 0x00;
//		SET_BIT(PORTA,i);
////		for(; k < 6;k++)
////		{
////			INSERT_first_4B(PORTC, arr[k]);
////
////		}
//		_delay_ms(5);
//	}
//}

ISR(TIMER1_COMPA_vect)
{
//	int i = 0 ;
//	for(; i<6 ; i++)
//	{
//		if(i %2 == 0 )
//		{ //even number
//			arr[i]++;
//			if(arr[i] == 10 )
//			{
//				arr[i] = 0 ;
//				arr[i+1]++;
//			}
//		}
//		else
//		{
//			//odd number
//			if(i == 6)
//			{
//				arr[i]++;
//				if(arr[i] == 6 )
//				{
//					arr[i] = 0 ;
//				}
//			}
//			else
//			{
//				if(arr[i] == 6 )
//				{
//					arr[i] = 0 ;
//					arr[i+1]++;
//				}
//			}
//		}
//	}
	PORTC++;

}
int main(void)
{
	//initializing output pins
	int i = PC0;
	int j = PA0;
	for(; i <= PC3;i++)
	{
		SET_BIT(DDRC, i);

	}
	for(; j<= PA5;j++)
	{
		SET_BIT(DDRA, j);
	}
	PORTC = 0x00;
	PORTA = 0x0F;

	//initializing input pins
	SET_BIT(DDRD, PD2);
	SET_BIT(PORTD, PD2); //INTERNAL PULL UP
	SET_BIT(DDRD, PD3);
	SET_BIT(DDRB, PB2);
	SET_BIT(PORTB, PB2); //INTERNAL PULL UP

	while(1)
	{
//		print_num();
	}

	return 0;
}
