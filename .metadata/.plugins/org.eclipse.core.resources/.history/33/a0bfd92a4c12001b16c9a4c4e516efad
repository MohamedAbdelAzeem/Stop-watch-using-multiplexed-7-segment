/*
 * main.c
 *
 *  Created on: Oct 19, 2020
 *      Author: Mohamed AbdelAzeem
 */



#include <util/delay.h>
#include <avr/io.h>
#include <avr/interrupt.h>
#include "operations.h"
#include "Int_init.h"
#include "ISR.c"


unsigned char digits[6] = {0};


void Pins_init(void)
{
	//initializing output pins
	int i = PC0;
	int j = PA0;
	for(; i <= PC3;i++)
	{
		SET_BIT(DDRC, i);

	}
	for(; j<= PA5;j++)
	{
		SET_BIT(DDRA, j);
	}
	//initializing input pins
	CLEAR_BIT(DDRD, PD2);
	SET_BIT(PORTD, PD2); //INTERNAL PULL UP

	CLEAR_BIT(DDRD, PD3);

	CLEAR_BIT(DDRB, PB2);
	SET_BIT(PORTB, PB2); //INTERNAL PULL UP

}

void print_num()
{
	int k = 0 ;
	int i = PA0;
	PORTA = 0x00;
	for(; i<=PA5 ;i++)
	{
		SET_BIT(PORTA,i);
		PORTC = digits[k];
		k++;
		_delay_ms(2);
		CLEAR_BIT(PORTA,i);
	}
}









int main(void)
{
	SET_BIT(SREG,7);
	Pins_init();
	INT0_init();
	INT1_init();
	INT2_init();
	Timer1_init();

	while(1)
	{
		print_num();
	}

	return 0;
}
